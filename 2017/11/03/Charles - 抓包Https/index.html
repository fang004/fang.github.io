<!-- build time:Fri Nov 03 2017 17:27:24 GMT+0800 (CST) --><!DOCTYPE html><html><head><meta charset="UTF-8"><title>赵芳</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/styles.css"><link rel="shortcut icon" href="/2017/11/03/Charles - 抓包Https/index.html"></head></html><body class="te-body-default"><div class="te-wrap" id="teWrap"><div class="te-left"><div id="menu-outer"><div id="menu-inner"><div class="te-menu-item"><a href="/"><span>赵芳</span></a></div><div class="te-menu-item"><a href="/archives"><span>所有文章</span></a></div><div class="te-menu-item"><a href="https://github.com/fang004"><span>Github</span></a></div></div></div></div><div class="te-right"><div id="content-outer"><div id="content-inner"><article id="post"><h1 class="post-title"></h1><div class="toc-show" id="tocShow"></div><div class="te-post-outer"><div class="te-post-inner"><h1 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1><ol><li>安装Charles。</li><li>电脑安装证书 （V4.0）<ul><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041201.png" alt="PC安装证书"></li></ul></li><li>电脑上信任证书<ul><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041202.jpeg" alt="信任证书"></li></ul></li><li>手机设置代理<ul><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041206.jpeg" alt="手机设置代理"></li></ul></li><li>手机安装证书（前提手机上设置好代理）<ul><li>手机上打开网址：<code>chls.pro/ssl</code></li><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041208.png" alt="手机安装证书"></li><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041209.png" alt="手机安装证书"></li></ul></li><li>手机上信任证书<ul><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041203.png" alt="手机安装证书"></li></ul></li><li>mac设置代理<ul><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041204.png" alt="mac设置代理"></li><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041205.png" alt="mac设置代理"></li></ul></li><li>抓包<ul><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041207.png" alt="抓包"></li></ul></li></ol><h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><ol><li><p>SSLHandshake: Remote host closed connection during handshake</p><ul><li>原因：remote设置不正确</li><li>解决：<ul><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041210.png" alt="remote设置"></li><li><img src="https://raw.githubusercontent.com/fang004/attachment/master/blog/img/2017041211.png" alt="remote设置"></li></ul></li></ul></li><li><p>SSLHandshake: Received fatal alert: unknown_ca</p><ul><li>原因：在iOS 10.3之前,当你将安装一个自定义证书,iOS会默认信任,不需要进一步的设置。而iOS 10.3之后,安装新的自定义证书默认是不受信任的。如果要信任已安装的自定义证书,需要手动打开开关以信任证书。</li><li>解决:<ul><li>设置-&gt;通用-&gt;关于本机-&gt;证书信任设置-&gt; 找到charles proxy custom root certificate然后信任该证书即可.</li></ul></li></ul></li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://segmentfault.com/a/1190000005070614" target="_blank" rel="external">mac环境下使用Charles抓包Https请求</a></li><li><a href="http://www.cnblogs.com/yanghj010/p/7060989.html" target="_blank" rel="external">iOS 10.3下解决Charles抓包ssl证书信任问题</a></li></ul></div><div class="post-toc" id="postToc"><div class="toc-outer"><div class="top-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#步骤"><span class="toc-number">1.</span> <span class="toc-text">步骤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常见问题"><span class="toc-number">2.</span> <span class="toc-text">常见问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-number">2.1.</span> <span class="toc-text">参考</span></a></li></ol></li></ol></div></div></div></article><nav id="pagination"><a href="/2017/11/03/二维码的生成和扫码/" class="next"><i class="fa fa-angle-right"></i></a></nav></div></div><script src="/js/scripts.js"></script></div></div><script src="/js/scripts.js"></script></body><!-- rebuild by neat -->